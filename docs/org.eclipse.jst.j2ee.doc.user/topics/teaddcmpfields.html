<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<link rel="stylesheet" type="text/css" href="../../org.eclipse.wst.doc.user/common.css" />
<title>Adding and removing CMP fields</title>
</head>
<body id="teaddcmpfields"><a name="teaddcmpfields"><!-- --></a>

<h1 class="topictitle1">Adding and removing CMP fields</h1>
<div><p>Container-managed persistence (CMP) fields, or attributes, define
the variables in the bean class for which the container must handle persistence
management.</p><div class="skipspace"> <p>When you initially create a CMP entity bean, you have the option
of adding persistence fields, or attributes, to the bean.</p>
<p>However, if
you later decide that you want to add a CMP field to the entity bean and perhaps
define it as a key field, you can use the EJB deployment descriptor editor.
For example, if you created a CMP entity bean named <i>Customer</i>, you might
later want to add the CMP field <i>email</i> to the entity bean. Use the Bean
page of the EJB deployment descriptor editor to add and remove CMP fields.</p>
<div class="note"><span class="notetitle">Note: </span>If
a relationship exists between one or more CMP beans, any changes to the key
shape of one CMP bean may result in the related CMP bean being regenerated.</div>
<p>To
add a CMP field with the EJB deployment descriptor editor:</p>
</div>
<ol><li class="skipspace"><span>On the Beans page of the EJB deployment descriptor editor, select
the CMP entity bean.</span></li>
<li class="skipspace"><span>Click the <span class="uicontrol">Add</span> button next to the CMP Fields
section. The CMP Fields dialog box opens and lists the current CMP fields.
Note: If the enterprise bean is binary (red color), you will not be allowed
to add a CMP field for that bean.</span></li>
<li class="skipspace"><span>Click <span class="uicontrol">Add</span>.</span></li>
<li class="skipspace"><span>In the <span class="uicontrol">Name</span> field, specify a name for the
CMP field, making sure that the name is unique for the entity bean class.</span></li>
<li class="skipspace"><span>In the <span class="uicontrol">Type</span> field, specify a type for the
CMP field either by typing in the name of the type or by selecting a type
from the drop-down list. The drop down contains a list of types, including
the Java™ primitive
types. You can also click <span class="uicontrol">Browse</span> to select other types
that exist on the class path of the EJB project. If you type the class name
of a type that is in the list, the fully-qualified name displays.</span></li>
<li class="skipspace"><span>If you want the CMP field to be an array, select the <span class="uicontrol">Array</span> check
box, then specify the number of dimensions for the array. </span></li>
<li class="skipspace"><span>To specify an initial value for the CMP field, type the value in
the <b>Initial Value</b> field.</span> This option is not available for
2.0 CMP beans. For simple string types, the value must be enclosed in double
quotation marks; for example: <tt>"string-type"</tt>. Char types must be enclosed
in single quotes; for example: 'c'.<div class="p">For an array, the value must correctly
use braces; for example:<ul><li><tt>{1,2,3}</tt> for a 1-dimension array</li>
<li><tt>{{1,2,3}, {4,5}}</tt> for a 2-dimension array.</li>
</ul>
</div>
</li>
<li class="skipspace"><span>To define the CMP field as a key field, select the <span class="uicontrol">Key
field</span> check box. This will not be an option if this is a child
bean. A key field is required for a CMP bean.</span>  The
CMP key field is added to both the bean and key classes. The create method
of the Home interface is modified to include this new type.</li>
<li class="skipspace"><span>For EJB 1.1 beans, the following options are available:</span><ul><li>To generate methods to retrieve and set values for the CMP field,
select the <span class="uicontrol">Access with getter and setter methods</span> check
box.</li>
<li>To promote these generated methods to the remote interface, select <b>Promote
getter and setter methods to remote interface</b>. This option is only available
if you selected <span class="uicontrol">Access with getter and setter methods</span>.</li>
<li>To specify the getter method as read-only, select <span class="uicontrol">Make
getter read-only</span>. This informs a WebSphere<sup>®</sup> Application Server container that
the getter method does not update any of the CMP fields of the CMP entity
bean. The container will not write the bean data back to the database after
the getter method is called, which can improve performance. This option is
only available if you selected <span class="uicontrol">Promote getter and setter methods
to remote interface</span>.</li>
</ul>
</li>
<li class="skipspace"><span>For EJB 2.x beans, the following options are available if you are
not creating a key field:</span><ul><li><span class="uicontrol">Promote getter and setter methods to remote interface</span></li>
<li><span class="uicontrol">Promote getter and setter methods to local interface</span></li>
</ul>
</li>
<li class="skipspace"><span>Click <span class="uicontrol">Apply</span>, and repeat the steps to for
additional CMP fields, then click <span class="uicontrol">Close</span>.</span></li>
<li class="skipspace"><span>Click <span class="uicontrol">Finish</span>. The new CMP fields are added
to the bean definition.</span></li>
</ol>
<div class="skipspace"><div class="note"><span class="notetitle">Note: </span>To remove a CMP field, select the field on the Beans page of
the EJB deployment descriptor editor and click the <span class="uicontrol">Remove</span> button.</div>
</div>
</div>

<div><p><b class="relconceptshd">Related concepts</b><br />
<a href="../topics/cekeycl.html" title="A key class is used when creating or finding an entity bean. It represents the identity of the entity bean, corresponding to the primary-key columns of a row in a relational database. Each designated container-managed field in the entity bean that corresponds to one of these columns is called a key field.">Key classes and key fields</a><br />
</p>
<p><b class="reltaskshd">Related tasks</b><br />
<a href="../topics/teaddclientviews.html" title="You can use the EJB deployment descriptor editor to add and remove client views, or interfaces, from existing entity or session beans.">Adding client views or interfaces to beans</a><br />
</p>
</div>		<br />
		(C) Copyright IBM Corporation 2000, 2005. All Rights Reserved.
</body>
</html>
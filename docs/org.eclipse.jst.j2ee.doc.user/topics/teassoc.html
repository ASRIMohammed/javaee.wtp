<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<link rel="stylesheet" type="text/css" href="../../org.eclipse.wst.doc.user/common.css" />
<title>Defining bean relationships</title>
</head>
<body id="teassoc"><a name="teassoc"><!-- --></a>

<h1 class="topictitle1">Defining bean relationships</h1>
<div><p>Use the EJB deployment descriptor editor to specify the relationship
between two enterprise beans in your EJB module.</p><div class="skipspace"><div class="important"><span class="importanttitle">Important: </span>Relationships for EJB 1.1 beans are WebSphere<sup>®</sup> Application
Server extensions to the EJB 1.1 specification. Relationships for EJB 2.x
beans are part of the EJB 2.x specification. If your project is not targeted
to a WebSphere Application Server runtime environment, the editor does not
display any EJB 1.1 relationship sections. The two levels of relationships
are handled differently from different sections of the deployment descriptor
editor.</div>
<p>The EJB deployment descriptor editor generates the appropriate
finder methods to support any relationships that you create.</p>
<p>When you
define a relationship from one CMP bean to another, extra CMP fields based
on the key fields from the referencing CMP bean are added to the owning CMP
bean of the forward referencing role (Foreign Key check box is selected on
the owning CMP bean).</p>
<p> For example, Company has a 1:many relationship
to Employee with roles company and employees respectively. The company role
is forward and the Company CMP bean has key fields named "companyID" and "companyName".
The CMP fields that are automatically added to the Employee bean are "company_companyID"
and "company_companyName". These fields are hidden in the EJB editor because
they are fields that were added to support the "employee" relationship role.
Problems would arise if these CMP fields were removed from the ejb-jar.xml
file while the relationship still existed.</p>
<p> When a relationship is created,
additional classes are created to support the runtime in maintaining the links
between these two beans. Also, additional methods will be generated into the
Home, Remote, and Bean classes of both enterprise beans. You will see compile
errors in the EJB deployment descriptor editor when a relationship is first
created because the generated Link classes need to be compiled. You will see
the actual code in these files but the changes in the Home, Remote, and Bean
classes have not yet been compiled. This will not take place until the project
is built, which usually happens automatically when the EJB deployment descriptor
editor or the EJB editor is saved. Therefore, you will not see compile errors
until the editor is saved.</p>
<p><span class="uicontrol">Note:</span> If a relationship
exists between one or more CMP beans, changing the key shape of one CMP may
result in the related CMPs being regenerated.</p>
<div class="p">If you intend to access
the enterprise beans from a Java™ application, add the following JAR
files to the class path: <ul><li><samp class="codeph">ivjejb35.jar</samp></li>
<li><samp class="codeph">vaprt.jar</samp></li>
</ul>
</div>
<p>For example, if you are using relationships and call a relationship
method on the remote interface that returns an enumeration of enterprise beans,
the method call will throw an exception unless these JAR files are added to
the class path.</p>
</div>
</div>

<div><p><b class="relconceptshd">Related concepts</b><br />
<a href="../topics/ceejbed.html" title="The EJB deployment descriptor editor is used to modify EJB JAR files and associated Java files.">EJB Deployment Descriptor editor</a><br />
<a href="../topics/ceassoc.html" title="In the EJB tools, you can use the EJB deployment descriptor editor to optionally define a relationship between different enterprise beans.">EJB relationships</a><br />
</p>
<p><b class="reltaskshd">Related tasks</b><br />
<a href="../topics/tereltwo.html" title="Use the Add Relationship wizard to specify the relationship between two enterprise beans in your EJB project or module. The appropriate finder methods are generated to support any relationships that you create.">Creating relationships for EJB 2.x beans</a><br />
</p>
</div>		<br />
		(C) Copyright IBM Corporation 2000, 2005. All Rights Reserved.
</body>
</html>
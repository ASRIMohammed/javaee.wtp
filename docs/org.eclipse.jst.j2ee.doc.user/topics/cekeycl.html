<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<link rel="stylesheet" type="text/css" href="../../org.eclipse.wst.doc.user/common.css" />
<title>Key classes and key fields</title>
</head>
<body id="cekeycl"><a name="cekeycl"><!-- --></a>

<h1 class="topictitle1">Key classes and key fields</h1>
<div><p>A <i>key class</i> is used when creating or finding an entity bean.
It represents the identity of the entity bean, corresponding to the primary-key
columns of a row in a relational database. Each designated container-managed
field in the entity bean that corresponds to one of these columns is called
a <i>key field</i>.</p><p>There are two main ways to specify primary key classes:</p>
<ul><li>Single-field keys are primary keys that map to a single field in the entity
bean class. If you only have one key field whose type is a valid IIOP type,
then this type may be used as the <samp class="codeph">prim-key-class</samp> entry in
the deployment descriptor. When doing so, the field must be specified as a <samp class="codeph">prim-key-field</samp>.
If you have a container-managed entity with a <samp class="codeph">prim-key-class</samp> and
you try to add another attribute to the key of this CMP bean, you will be
prompted to change the key class since you can no longer have a <samp class="codeph">prim-key-field</samp>. </li>
<li>Compound keys are primary keys that map to multiple fields in the entity
bean class. You must declare the primary key class as well as all fields in
the primary key class as public.</li>
</ul>
<p>For 1.1 CMP beans, for each key field in the bean class, there must be
a field with the same name and type in the key class; conversely, for every
field in the key class, there must be a field with the same name and type
in the bean class, and these fields are considered to be key fields. For 2.x
CMP beans, there must be a get and set method for each key field.</p>
<p>For example, suppose that you have an EJB 1.1 Account bean for a banking
application. The accountNumber property has been designated as a key field,
and it corresponds to the primary key of an ACCOUNT database table. The key
class for Account (AccountKey) includes the following: </p>
<ul><li>A public String field called accountNumber </li>
<li>A one-argument constructor, AccountKey(String), that sets accountNumber </li>
</ul>
<p>As an alternative to AccountKey, Account could use a key class of java.lang.String,
and a primary key field of accountNumber.</p>
<p>Key classes are common to all inherited enterprise beans. This means that
the key class of a parent enterprise bean is also used by all of its child
enterprise beans. So, if the key class is changed for an entity with subtypes
or the inheritance structure changes, all subtype entities will have their
corresponding Home and Bean classes regenerated. Key classes can be shared
only among beans in the same inheritance hierarchy. </p>
<p>If you have roles as part of the key, and if the key shape of the role's
enterprise bean type changes (added or removed keys), a dialog to propagate
these changes through all the key roles is displayed. In most cases, you should
select <span class="uicontrol">Yes</span> or <span class="uicontrol">Yes to All</span>. Not
propagating the changes through all key roles could result in compilation
errors.</p>
<div class="skipspace"><h4 class="sectiontitle">Unknown primary key is not supported</h4><p>The
EJB tooling currently does not support the Unknown primary key definition
described in the EJB 2.0 specification. The workaround is to define a specific
primary key class.</p>
</div>
</div>

<div><p><b class="reltaskshd">Related tasks</b><br />
<a href="../topics/teaddcmpfields.html" title="Container-managed persistence (CMP) fields, or attributes, define the variables in the bean class for which the container must handle persistence management.">Adding and removing CMP fields</a><br />
<a href="../topics/teaddclientviews.html" title="You can use the EJB deployment descriptor editor to add and remove client views, or interfaces, from existing entity or session beans.">Adding client views or interfaces to beans</a><br />
</p>
</div>		<br />
		(C) Copyright IBM Corporation 2000, 2005. All Rights Reserved.
</body>
</html>